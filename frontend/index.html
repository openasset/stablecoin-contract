<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FiatToken Deployer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>FiatToken Deployer</h1>
            <p class="subtitle">EVM í˜¸í™˜ ë¸”ë¡ì²´ì¸ì— FiatTokenì„ ë°°í¬í•©ë‹ˆë‹¤</p>
        </header>

        <div class="card">
            <div class="section">
                <h2>1. ì§€ê°‘ ì—°ê²°</h2>
                <div class="wallet-section">
                    <button id="connectWallet" class="btn btn-primary">ì§€ê°‘ ì—°ê²°</button>
                    <div id="walletInfo" class="wallet-info hidden">
                        <p><strong>ì—°ê²°ëœ ì£¼ì†Œ:</strong> <span id="connectedAddress"></span></p>
                        <p><strong>í˜„ì¬ ë„¤íŠ¸ì›Œí¬:</strong> <span id="currentNetwork"></span></p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>2. ë°°í¬ ë„¤íŠ¸ì›Œí¬ ì„ íƒ</h2>
                <select id="networkSelect" class="select-box" disabled>
                    <option value="">ë„¤íŠ¸ì›Œí¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="1001">Kaia Testnet (Kairos)</option>
                    <option value="8217">Kaia Mainnet (Cypress)</option>
                    <option value="97">BSC Testnet</option>
                    <option value="56">BSC Mainnet</option>
                </select>
                <button id="switchNetwork" class="btn btn-secondary" disabled>ë„¤íŠ¸ì›Œí¬ ì „í™˜</button>
            </div>

            <div class="section">
                <h2>3. í† í° ì •ë³´ ì…ë ¥</h2>
                <form id="tokenForm">
                    <div class="form-group">
                        <label for="tokenName">í† í° ì´ë¦„ *</label>
                        <input type="text" id="tokenName" placeholder="ì˜ˆ: USD Coin" required>
                    </div>

                    <div class="form-group">
                        <label for="tokenSymbol">í† í° ì‹¬ë³¼ *</label>
                        <input type="text" id="tokenSymbol" placeholder="ì˜ˆ: USDC" required>
                    </div>

                    <div class="form-group">
                        <label for="tokenCurrency">í†µí™” *</label>
                        <input type="text" id="tokenCurrency" placeholder="ì˜ˆ: USD" required>
                    </div>

                    <div class="form-group">
                        <label for="tokenDecimals">Decimals (ê³ ì •)</label>
                        <input type="number" id="tokenDecimals" value="6" readonly>
                    </div>
                </form>
            </div>

            <div class="section">
                <h2>4. ì—­í•  ì£¼ì†Œ ì„¤ì •</h2>
                <div class="info-box">
                    <p><strong>â„¹ï¸ ì—­í•  ì„¤ëª…:</strong></p>
                    <ul>
                        <li><strong>Owner:</strong> pauser, blacklister, masterMinter ì£¼ì†Œ ê´€ë¦¬</li>
                        <li><strong>Proxy Owner:</strong> í”„ë¡ì‹œ ì—…ê·¸ë ˆì´ë“œ ê¶Œí•œ</li>
                        <li><strong>Master Minter:</strong> minter ì¶”ê°€/ì œê±° ë° ë°œí–‰ëŸ‰ ì„¤ì •</li>
                        <li><strong>Pauser:</strong> ì»¨íŠ¸ë™íŠ¸ ì¼ì‹œ ì¤‘ì§€/ì¬ê°œ</li>
                        <li><strong>Blacklister:</strong> ì£¼ì†Œ ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬</li>
                        <li><strong>Rescuer:</strong> ì˜ëª» ì „ì†¡ëœ í† í° ë³µêµ¬</li>
                    </ul>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="useCurrentAddress">
                        ëª¨ë“  ì—­í• ì— í˜„ì¬ ì—°ê²°ëœ ì£¼ì†Œ ì‚¬ìš© (Proxy Owner ì œì™¸)
                    </label>
                    <p style="margin-top: 8px; color: #666; font-size: 0.9rem;">
                        âš ï¸ Proxy OwnerëŠ” ë°°í¬ìì™€ ë‹¬ë¼ì•¼ í•˜ë¯€ë¡œ ë³„ë„ë¡œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.
                    </p>
                </div>

                <div id="roleAddresses">
                    <div class="form-group">
                        <label for="ownerAddress">Owner ì£¼ì†Œ *</label>
                        <input type="text" id="ownerAddress" placeholder="0x..." required>
                    </div>

                    <div class="form-group">
                        <label for="proxyOwnerAddress">Proxy Owner ì£¼ì†Œ *</label>
                        <input type="text" id="proxyOwnerAddress" placeholder="0x..." required>
                    </div>

                    <div class="form-group">
                        <label for="masterMinterAddress">Master Minter ì£¼ì†Œ *</label>
                        <input type="text" id="masterMinterAddress" placeholder="0x..." required>
                    </div>

                    <div class="form-group">
                        <label for="pauserAddress">Pauser ì£¼ì†Œ *</label>
                        <input type="text" id="pauserAddress" placeholder="0x..." required>
                    </div>

                    <div class="form-group">
                        <label for="blacklisterAddress">Blacklister ì£¼ì†Œ *</label>
                        <input type="text" id="blacklisterAddress" placeholder="0x..." required>
                    </div>

                    <div class="form-group">
                        <label for="rescuerAddress">Rescuer ì£¼ì†Œ *</label>
                        <input type="text" id="rescuerAddress" placeholder="0x..." required>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>5. ë°°í¬</h2>
                <button id="deployButton" class="btn btn-primary btn-large" disabled>
                    FiatToken ë°°í¬í•˜ê¸°
                </button>

                <div id="deploymentStatus" class="status-box hidden">
                    <h3>ë°°í¬ ì§„í–‰ ìƒí™©</h3>
                    <div id="statusMessages"></div>
                </div>

                <div id="deploymentResult" class="result-box hidden">
                    <h3>âœ… ë°°í¬ ì™„ë£Œ!</h3>
                    <div class="result-item">
                        <strong>Implementation ì£¼ì†Œ:</strong>
                        <code id="implementationAddress"></code>
                    </div>
                    <div class="result-item">
                        <strong>Proxy ì£¼ì†Œ:</strong>
                        <code id="proxyAddress"></code>
                    </div>
                    <div class="result-item">
                        <strong>í† í° ì£¼ì†Œ (ì‚¬ìš©í•  ì£¼ì†Œ):</strong>
                        <code id="tokenAddress"></code>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë¯¼íŒ… ì¹´ë“œ -->
        <div class="card" style="margin-top: 30px;">
            <h2 style="margin-bottom: 20px;">ğŸ’° í† í° ê´€ë¦¬</h2>

            <div class="section">
                <h3>í† í° & MasterMinter ì—°ê²°</h3>
                <div class="form-group">
                    <label for="mintTokenAddress">í† í° ì£¼ì†Œ *</label>
                    <input type="text" id="mintTokenAddress" placeholder="0x... (ìœ„ì—ì„œ ë°°í¬í•œ Proxy ì£¼ì†Œ)">
                </div>
                <div class="form-group">
                    <label for="masterMinterContractAddress">MasterMinter ì£¼ì†Œ *</label>
                    <input type="text" id="masterMinterContractAddress" placeholder="0x... (ìœ„ì—ì„œ ë°°í¬í•œ MasterMinter ì£¼ì†Œ)">
                </div>
                <button id="connectToken" class="btn btn-secondary">ì—°ê²°</button>

                <div id="tokenInfo" class="wallet-info hidden" style="margin-top: 15px;">
                    <p><strong>í† í° ì´ë¦„:</strong> <span id="tokenInfoName"></span></p>
                    <p><strong>í† í° ì‹¬ë³¼:</strong> <span id="tokenInfoSymbol"></span></p>
                    <p><strong>ì´ ë°œí–‰ëŸ‰:</strong> <span id="tokenInfoSupply"></span></p>
                    <p><strong>ë‚´ ì”ì•¡:</strong> <span id="tokenInfoBalance"></span></p>
                    <hr style="margin: 10px 0; border: none; border-top: 1px solid #ddd;">
                    <p><strong>ğŸ”‘ ê¶Œí•œ ì£¼ì†Œ</strong></p>
                    <p style="margin-left: 15px;"><strong>Owner:</strong> <span id="tokenOwner"></span></p>
                    <p style="margin-left: 15px;"><strong>Master Minter:</strong> <span id="tokenMasterMinter"></span></p>
                    <p style="margin-left: 15px;"><strong>Pauser:</strong> <span id="tokenPauser"></span></p>
                    <p style="margin-left: 15px;"><strong>Blacklister:</strong> <span id="tokenBlacklister"></span></p>
                    <p style="margin-left: 15px;"><strong>Rescuer:</strong> <span id="tokenRescuer"></span></p>
                    <hr style="margin: 10px 0; border: none; border-top: 1px solid #ddd;">
                    <p><strong>ğŸ’° í˜„ì¬ ì£¼ì†Œ ê¶Œí•œ</strong></p>
                    <p style="margin-left: 15px;"><strong>MasterMinter Owner:</strong> <span id="masterMinterOwner"></span></p>
                    <p style="margin-left: 15px;"><strong>Controller ì—¬ë¶€:</strong> <span id="isController"></span></p>
                    <p style="margin-left: 15px;"><strong>ê´€ë¦¬í•˜ëŠ” Minter:</strong> <span id="controlledMinter"></span></p>
                    <p style="margin-left: 15px;"><strong>Minter ì—¬ë¶€:</strong> <span id="tokenIsMinter"></span></p>
                    <p style="margin-left: 15px;"><strong>ë°œí–‰ ê°€ëŠ¥ëŸ‰:</strong> <span id="tokenMinterAllowance"></span></p>
                </div>
            </div>

            <div class="section">
                <h3>1. Controller ì„¤ì • (MasterMinter Owner ê¶Œí•œ í•„ìš”)</h3>
                <div class="info-box">
                    <p><strong>â„¹ï¸ Controller-Minter êµ¬ì¡°:</strong></p>
                    <p>MasterMinter Ownerê°€ Controllerë¥¼ ì„¤ì •í•˜ê³ , ê° Controllerê°€ í•˜ë‚˜ì˜ Minterë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
                    <p>ë™ì¼í•œ Minterë¥¼ ì—¬ëŸ¬ Controllerê°€ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>

                <div class="form-group">
                    <label for="controllerAddress">Controller ì£¼ì†Œ *</label>
                    <input type="text" id="controllerAddress" placeholder="0x...">
                </div>
                <div class="form-group">
                    <label for="workerAddress">Minter(Worker) ì£¼ì†Œ *</label>
                    <input type="text" id="workerAddress" placeholder="0x...">
                </div>
                <button id="configureControllerBtn" class="btn btn-primary" disabled>Controller ì„¤ì •</button>
            </div>

            <div class="section">
                <h3>2. Controller â†’ Minter ì¡°íšŒ</h3>
                <div class="form-group">
                    <label for="checkControllerAddress">ì¡°íšŒí•  Controller ì£¼ì†Œ</label>
                    <input type="text" id="checkControllerAddress" placeholder="0x...">
                </div>
                <button id="checkControllerBtn" class="btn btn-secondary" disabled>Controller ì¡°íšŒ</button>

                <div id="controllerCheckResult" class="wallet-info hidden" style="margin-top: 15px;">
                    <p><strong>ê´€ë¦¬í•˜ëŠ” Minter:</strong> <span id="checkControllerMinter"></span></p>
                    <p><strong>Minter ë°œí–‰ ê°€ëŠ¥ëŸ‰:</strong> <span id="checkControllerMinterAllowance"></span></p>
                </div>
            </div>

            <div class="section">
                <h3>3. Minter ì¡°íšŒ</h3>
                <div class="form-group">
                    <label for="checkMinterAddress">ì¡°íšŒí•  Minter ì£¼ì†Œ</label>
                    <input type="text" id="checkMinterAddress" placeholder="0x...">
                </div>
                <button id="checkMinterBtn" class="btn btn-secondary" disabled>Minter ì •ë³´ ì¡°íšŒ</button>

                <div id="minterCheckResult" class="wallet-info hidden" style="margin-top: 15px;">
                    <p><strong>Minter ì—¬ë¶€:</strong> <span id="checkIsMinter"></span></p>
                    <p><strong>ë°œí–‰ ê°€ëŠ¥ëŸ‰:</strong> <span id="checkMinterAllowance"></span></p>
                </div>
            </div>

            <div class="section">
                <h3>4. Minter ì„¤ì • (Controller ê¶Œí•œ í•„ìš”)</h3>
                <div class="info-box">
                    <p><strong>â„¹ï¸ Minter ì„¤ì •:</strong></p>
                    <p>Controllerë¡œ ì„¤ì •ëœ ì£¼ì†Œë§Œ ìì‹ ì´ ê´€ë¦¬í•˜ëŠ” Minterì˜ ë°œí–‰ í•œë„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <p>í˜„ì¬ ì£¼ì†Œê°€ Controllerì—¬ì•¼ í•˜ë©°, ìë™ìœ¼ë¡œ ì—°ê²°ëœ Minterë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>
                </div>

                <div class="form-group">
                    <label for="minterAllowance">ë°œí–‰ í•œë„ *</label>
                    <input type="number" id="minterAllowance" placeholder="1000000" step="0.000001">
                    <small style="color: #666; display: block; margin-top: 5px;">
                        Decimals 6 ê¸°ì¤€ (ì˜ˆ: 1000000 = 1 í† í°)
                    </small>
                </div>
                <button id="configureMinterBtn" class="btn btn-primary" disabled>Minter ì„¤ì •</button>
            </div>

            <div class="section">
                <h3>5. ë¯¼íŒ… í…ŒìŠ¤íŠ¸ (ë””ë²„ê¹…)</h3>
                <div class="info-box">
                    <p><strong>ğŸ” ë¯¼íŒ… ì‚¬ì „ ê²€ì¦:</strong></p>
                    <p>ì‹¤ì œ ë¯¼íŒ…í•˜ê¸° ì „ì— íŠ¹ì • Minter ì£¼ì†Œë¡œ ë¯¼íŒ…ì´ ê°€ëŠ¥í•œì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
                    <p>ì‹¤íŒ¨ ì‹œ êµ¬ì²´ì ì¸ ì—ëŸ¬ ì›ì¸ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>

                <div class="form-group">
                    <label for="testMinterAddress">í…ŒìŠ¤íŠ¸í•  Minter ì£¼ì†Œ *</label>
                    <input type="text" id="testMinterAddress" placeholder="0x...">
                </div>
                <div class="form-group">
                    <label for="testMintToAddress">ë°›ì„ ì£¼ì†Œ *</label>
                    <input type="text" id="testMintToAddress" placeholder="0x...">
                </div>
                <div class="form-group">
                    <label for="testMintAmount">í…ŒìŠ¤íŠ¸ ë°œí–‰ëŸ‰ *</label>
                    <input type="number" id="testMintAmount" placeholder="1000000" step="0.000001">
                    <small style="color: #666; display: block; margin-top: 5px;">
                        Decimals 6 ê¸°ì¤€ (ì˜ˆ: 1000000 = 1 í† í°)
                    </small>
                </div>
                <button id="estimateGasBtn" class="btn btn-secondary" disabled>ê°€ìŠ¤ ì¶”ì • & ê²€ì¦</button>

                <div id="estimateResult" class="wallet-info hidden" style="margin-top: 15px;">
                    <p><strong>âœ… ê²€ì¦ ê²°ê³¼:</strong></p>
                    <p style="margin-left: 15px;"><strong>ìƒíƒœ:</strong> <span id="estimateStatus"></span></p>
                    <p style="margin-left: 15px;"><strong>ì˜ˆìƒ ê°€ìŠ¤:</strong> <span id="estimateGas"></span></p>
                    <p style="margin-left: 15px;"><strong>ì˜ˆìƒ ë¹„ìš©:</strong> <span id="estimateCost"></span></p>
                    <div id="estimateError" style="margin-top: 10px; display: none;">
                        <p><strong>âŒ ì—ëŸ¬ ìƒì„¸:</strong></p>
                        <pre id="estimateErrorDetails" style="background: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; font-size: 0.85rem;"></pre>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>6. í† í° ë°œí–‰ (Minter ê¶Œí•œ í•„ìš”)</h3>
                <div class="info-box">
                    <p><strong>â„¹ï¸ í† í° ë°œí–‰:</strong></p>
                    <p>Minterë¡œ ì„¤ì •ëœ ì£¼ì†Œë§Œ í† í°ì„ ë°œí–‰í•  ìˆ˜ ìˆìœ¼ë©°, ì„¤ì •ëœ ë°œí–‰ í•œë„ ë‚´ì—ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                </div>

                <div class="form-group">
                    <label for="mintToAddress">ë°›ì„ ì£¼ì†Œ *</label>
                    <input type="text" id="mintToAddress" placeholder="0x...">
                </div>
                <div class="form-group">
                    <label for="mintAmount">ë°œí–‰ëŸ‰ *</label>
                    <input type="number" id="mintAmount" placeholder="1000000" step="0.000001">
                    <small style="color: #666; display: block; margin-top: 5px;">
                        Decimals 6 ê¸°ì¤€ (ì˜ˆ: 1000000 = 1 í† í°)
                    </small>
                </div>
                <button id="mintBtn" class="btn btn-primary" disabled>í† í° ë°œí–‰</button>

                <div id="mintStatus" class="status-box hidden">
                    <h3>ë°œí–‰ ì§„í–‰ ìƒí™©</h3>
                    <div id="mintStatusMessages"></div>
                </div>
            </div>

            <div class="section">
                <h3>7. ì—­í•  ì£¼ì†Œ ë³€ê²½ (Owner ê¶Œí•œ í•„ìš”)</h3>
                <div class="info-box">
                    <p><strong>â„¹ï¸ ì—­í•  ì£¼ì†Œ ë³€ê²½:</strong></p>
                    <p>Ownerë§Œ ê° ì—­í• ì˜ ì£¼ì†Œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <p>ë³€ê²½ í›„ì—ëŠ” ì´ì „ ì£¼ì†ŒëŠ” í•´ë‹¹ ê¶Œí•œì„ ìƒê²Œ ë©ë‹ˆë‹¤.</p>
                </div>

                <div class="form-group">
                    <label for="newPauserAddress">ìƒˆ Pauser ì£¼ì†Œ</label>
                    <input type="text" id="newPauserAddress" placeholder="0x...">
                    <button id="updatePauserBtn" class="btn btn-secondary" disabled style="margin-top: 5px;">Pauser ë³€ê²½</button>
                </div>

                <div class="form-group">
                    <label for="newBlacklisterAddress">ìƒˆ Blacklister ì£¼ì†Œ</label>
                    <input type="text" id="newBlacklisterAddress" placeholder="0x...">
                    <button id="updateBlacklisterBtn" class="btn btn-secondary" disabled style="margin-top: 5px;">Blacklister ë³€ê²½</button>
                </div>

                <div class="form-group">
                    <label for="newRescuerAddress">ìƒˆ Rescuer ì£¼ì†Œ</label>
                    <input type="text" id="newRescuerAddress" placeholder="0x...">
                    <button id="updateRescuerBtn" class="btn btn-secondary" disabled style="margin-top: 5px;">Rescuer ë³€ê²½</button>
                </div>

                <div class="form-group">
                    <label for="newMasterMinterAddress">ìƒˆ Master Minter ì£¼ì†Œ</label>
                    <input type="text" id="newMasterMinterAddress" placeholder="0x...">
                    <button id="updateMasterMinterBtn" class="btn btn-secondary" disabled style="margin-top: 5px;">Master Minter ë³€ê²½</button>
                </div>

                <div id="roleUpdateStatus" class="status-box hidden" style="margin-top: 15px;">
                    <h3>ì—­í•  ë³€ê²½ ì§„í–‰ ìƒí™©</h3>
                    <div id="roleUpdateMessages"></div>
                </div>
            </div>

            <div class="section">
                <h3>8. ê¸°íƒ€ ê´€ë¦¬ ê¸°ëŠ¥</h3>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button id="pauseBtn" class="btn btn-secondary" disabled>ì¼ì‹œ ì¤‘ì§€</button>
                    <button id="unpauseBtn" class="btn btn-secondary" disabled>ì¬ê°œ</button>
                    <button id="blacklistBtn" class="btn btn-secondary" disabled>ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì¶”ê°€</button>
                    <button id="refreshBalanceBtn" class="btn btn-secondary" disabled>ì”ì•¡ ìƒˆë¡œê³ ì¹¨</button>
                </div>
            </div>
        </div>

        <footer>
            <p>FiatToken Smart Contract Deployer | Built for EVM-compatible blockchains</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/ethers@6.13.0/dist/ethers.umd.min.js" crossorigin="anonymous"></script>
    <script>
        // ethers.js ë¡œë“œ í™•ì¸
        window.addEventListener('load', function() {
            if (typeof ethers === 'undefined') {
                console.error('ethers.js failed to load from CDN');
                alert('ethers.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë”© ì‹¤íŒ¨. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
            } else {
                console.log('ethers.js loaded successfully, version:', ethers.version);
            }
        });
    </script>
    <script src="contracts.js"></script>
    <script src="app.js"></script>
</body>
</html>
